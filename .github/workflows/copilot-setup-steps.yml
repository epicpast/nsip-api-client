# Copilot Coding Agent Environment Setup
# This workflow prepares the development environment for GitHub Copilot coding agent
# Reference: https://docs.github.com/en/copilot/customizing-copilot/customizing-copilot-agents

name: Copilot Setup Steps

on:
  workflow_dispatch:
  push:
    paths:
      - .github/workflows/copilot-setup-steps.yml
  pull_request:
    paths:
      - .github/workflows/copilot-setup-steps.yml

jobs:
  copilot-setup-steps:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v6

      - name: Install uv
        uses: astral-sh/setup-uv@v7.1.6
        with:
          version: "latest"
          enable-cache: true

      - name: Set up Python
        run: uv python install 3.12

      - name: Install all dependencies
        run: uv sync --all-extras --group dev

      - name: Verify tooling
        run: |
          echo "=== Python version ==="
          uv run python --version
          echo ""
          echo "=== uv version ==="
          uv --version
          echo ""
          echo "=== ruff version ==="
          uv run ruff --version
          echo ""
          echo "=== pytest version ==="
          uv run pytest --version
          echo ""
          echo "=== mypy version ==="
          uv run mypy --version
          echo ""
          echo "=== Installed packages ==="
          uv pip list
